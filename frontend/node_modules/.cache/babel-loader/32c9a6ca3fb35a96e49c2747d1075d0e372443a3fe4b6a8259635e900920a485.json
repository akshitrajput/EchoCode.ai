{"ast":null,"code":"var _jsxFileName = \"/home/akshit/Workspace/DEV/Web Dev/echocode.ai/frontend/src/components/VoiceRecorderButton.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport { FiMic, FiLoader } from 'react-icons/fi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction VoiceRecorderButton({\n  onVoiceInput,\n  loading,\n  floating\n}) {\n  _s();\n  const [recording, setRecording] = useState(false);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const silenceTimeoutRef = useRef(null);\n  const maxTimeoutRef = useRef(null);\n  const startRecording = async () => {\n    setRecording(true);\n    const stream = await navigator.mediaDevices.getUserMedia({\n      audio: true\n    });\n    mediaRecorderRef.current = new window.MediaRecorder(stream);\n    audioChunksRef.current = [];\n    mediaRecorderRef.current.ondataavailable = e => {\n      audioChunksRef.current.push(e.data);\n    };\n    mediaRecorderRef.current.onstop = () => {\n      clearTimeout(silenceTimeoutRef.current);\n      clearTimeout(maxTimeoutRef.current);\n      const audioBlob = new Blob(audioChunksRef.current, {\n        type: 'audio/wav'\n      });\n      onVoiceInput(audioBlob);\n    };\n    mediaRecorderRef.current.start();\n    // Stop after 30s max\n    maxTimeoutRef.current = setTimeout(() => {\n      if (mediaRecorderRef.current && mediaRecorderRef.current.state === 'recording') {\n        stopRecording();\n      }\n    }, 30000);\n    // Simulate silence detection: stop after 5s (real silence detection needs more logic)\n    silenceTimeoutRef.current = setTimeout(() => {\n      if (mediaRecorderRef.current && mediaRecorderRef.current.state === 'recording') {\n        stopRecording();\n      }\n    }, 5000);\n  };\n  const stopRecording = () => {\n    setRecording(false);\n    if (mediaRecorderRef.current && mediaRecorderRef.current.state === 'recording') {\n      mediaRecorderRef.current.stop();\n    }\n    clearTimeout(silenceTimeoutRef.current);\n    clearTimeout(maxTimeoutRef.current);\n  };\n  if (floating) {\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      className: `bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-2xl flex items-center justify-center w-20 h-20 text-4xl border-4 border-blue-400 transition-all duration-200 ${loading ? 'opacity-50 cursor-not-allowed' : ''}`,\n      onClick: recording ? stopRecording : startRecording,\n      disabled: loading,\n      \"aria-label\": recording ? 'Stop Recording' : 'Start Recording',\n      style: {\n        boxShadow: '0 8px 32px rgba(0,0,0,0.3)'\n      },\n      children: loading ? /*#__PURE__*/_jsxDEV(FiLoader, {\n        className: \"animate-spin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 20\n      }, this) : /*#__PURE__*/_jsxDEV(FiMic, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 60\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: `bg-blue-500 text-white px-4 py-2 rounded shadow flex items-center ${loading ? 'opacity-50' : ''}`,\n    onClick: recording ? stopRecording : startRecording,\n    disabled: loading,\n    children: recording ? 'ðŸ›‘ Stop' : 'ðŸŽ¤ Record'\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n_s(VoiceRecorderButton, \"YHmydl68xyiVxmuR8KSrAAAsnnk=\");\n_c = VoiceRecorderButton;\nexport default VoiceRecorderButton;\nvar _c;\n$RefreshReg$(_c, \"VoiceRecorderButton\");","map":{"version":3,"names":["React","useRef","useState","FiMic","FiLoader","jsxDEV","_jsxDEV","VoiceRecorderButton","onVoiceInput","loading","floating","_s","recording","setRecording","mediaRecorderRef","audioChunksRef","silenceTimeoutRef","maxTimeoutRef","startRecording","stream","navigator","mediaDevices","getUserMedia","audio","current","window","MediaRecorder","ondataavailable","e","push","data","onstop","clearTimeout","audioBlob","Blob","type","start","setTimeout","state","stopRecording","stop","className","onClick","disabled","style","boxShadow","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/akshit/Workspace/DEV/Web Dev/echocode.ai/frontend/src/components/VoiceRecorderButton.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport { FiMic, FiLoader } from 'react-icons/fi';\n\nfunction VoiceRecorderButton({ onVoiceInput, loading, floating }) {\n  const [recording, setRecording] = useState(false);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const silenceTimeoutRef = useRef(null);\n  const maxTimeoutRef = useRef(null);\n\n  const startRecording = async () => {\n    setRecording(true);\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n    mediaRecorderRef.current = new window.MediaRecorder(stream);\n    audioChunksRef.current = [];\n    mediaRecorderRef.current.ondataavailable = (e) => {\n      audioChunksRef.current.push(e.data);\n    };\n    mediaRecorderRef.current.onstop = () => {\n      clearTimeout(silenceTimeoutRef.current);\n      clearTimeout(maxTimeoutRef.current);\n      const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/wav' });\n      onVoiceInput(audioBlob);\n    };\n    mediaRecorderRef.current.start();\n    // Stop after 30s max\n    maxTimeoutRef.current = setTimeout(() => {\n      if (mediaRecorderRef.current && mediaRecorderRef.current.state === 'recording') {\n        stopRecording();\n      }\n    }, 30000);\n    // Simulate silence detection: stop after 5s (real silence detection needs more logic)\n    silenceTimeoutRef.current = setTimeout(() => {\n      if (mediaRecorderRef.current && mediaRecorderRef.current.state === 'recording') {\n        stopRecording();\n      }\n    }, 5000);\n  };\n\n  const stopRecording = () => {\n    setRecording(false);\n    if (mediaRecorderRef.current && mediaRecorderRef.current.state === 'recording') {\n      mediaRecorderRef.current.stop();\n    }\n    clearTimeout(silenceTimeoutRef.current);\n    clearTimeout(maxTimeoutRef.current);\n  };\n\n  if (floating) {\n    return (\n      <button\n        className={`bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-2xl flex items-center justify-center w-20 h-20 text-4xl border-4 border-blue-400 transition-all duration-200 ${loading ? 'opacity-50 cursor-not-allowed' : ''}`}\n        onClick={recording ? stopRecording : startRecording}\n        disabled={loading}\n        aria-label={recording ? 'Stop Recording' : 'Start Recording'}\n        style={{ boxShadow: '0 8px 32px rgba(0,0,0,0.3)' }}\n      >\n        {loading ? <FiLoader className=\"animate-spin\" /> : <FiMic />}\n      </button>\n    );\n  }\n\n  return (\n    <button\n      className={`bg-blue-500 text-white px-4 py-2 rounded shadow flex items-center ${loading ? 'opacity-50' : ''}`}\n      onClick={recording ? stopRecording : startRecording}\n      disabled={loading}\n    >\n      {recording ? 'ðŸ›‘ Stop' : 'ðŸŽ¤ Record'}\n    </button>\n  );\n}\n\nexport default VoiceRecorderButton;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}